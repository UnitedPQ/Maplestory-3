// Generated by CoffeeScript 1.8.0
var SHAKE_THRESHOLD = 2000;
var lastUpdate = 0;
var x, y, z, lastX, lastY, lastZ;
var currentID = 1;
var maxID = 4;
$(document).ready(function() {
	var zIndex;
	
	
	if (window.DeviceMotionEvent) {
		window.addEventListener('devicemotion', deviceMotionHandler, false);
    }
	
	pageLoading("hide");
})

var deviceMotionHandler = function(eventData) {
    var acceleration = eventData.accelerationIncludingGravity;

    var curTime = new Date().getTime();

    if ((curTime - lastUpdate) > 50) {

        var diffTime = curTime - lastUpdate;
        lastUpdate = curTime;

        x = acceleration.x;
        y = acceleration.y;
        z = acceleration.z;

        var speed = Math.abs(x +y + z - lastX - lastY - lastZ) / diffTime * 10000;
        var currentSpeed = 0;
        if (speed >= SHAKE_THRESHOLD ) {
        	currentID ++ ;
        	if(currentID > maxID){
        		currentID = 1;
        	}
        	$(".view").children().removeClass("active").eq(currentID-1).addClass("active");
        	
        }
        lastX = x;
        lastY = y;
        lastZ = z;
    }
};
    
//---页面等待---//
function pageLoading(sw){
	if (sw == "show"){
		$(".fullmask,.pageloading").show();
	}
	if (sw == "hide"){
		$(".fullmask,.pageloading").hide();
	}
}
